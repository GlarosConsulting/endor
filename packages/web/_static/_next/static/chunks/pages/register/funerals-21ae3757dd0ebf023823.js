_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[21],{"7bmZ":function(e,r,t){"use strict";t.r(r);var a=t("VtSi"),o=t.n(a),n=t("QsI/"),c=t("ERkP"),i=t.n(c),l=t("3pNR"),d=t("a5ey"),s=t("cdSq"),u=t("Wcu4"),b=t("EO+0"),m=t("naHB"),p=t("nd+9"),f=t("2aAZ"),O=t("dfZ1"),j=t("L7b9"),g=t("jsCw"),h=t("ucHa"),v=t("yr4J"),x=t("Dp36"),y=t("l1C2"),w=(i.a.createElement,function(e){var r=e.isOpen,t=e.onClose,a=e.onSave,i=e.cemeteries,l=Object(c.useRef)(null),d=Object(f.a)(),b=Object(c.useCallback)(function(){var e=Object(n.a)(o.a.mark((function e(r,n){var c,i,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null===(c=l.current)||void 0===c||c.setErrors({}),i=j.d().shape({name:j.f().required("Nome obrigat\xf3rio"),url_cam:j.f().required("Link da cam\xeara obrigat\xf3rio"),cemetery_id:j.f().uuid().required("Cemit\xe9rio obrigat\xf3rio")}),e.next=5,i.validate(r,{abortEarly:!1});case 5:return e.next=7,x.a.post("funerals",r);case 7:d({status:"success",title:"Vel\xf3rio criado com sucesso",position:"top",duration:3e3}),t(n),a(),e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(0),!(e.t0 instanceof j.a)){e.next=18;break}return u=Object(v.a)(e.t0),null===(s=l.current)||void 0===s||s.setErrors(u),e.abrupt("return");case 18:d({status:"error",title:"Erro ao registrar o vel\xf3rio",description:"Ocorreu um erro ao registrar o vel\xf3rio, tente novamente.",position:"top",duration:5e3});case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(r,t){return e.apply(this,arguments)}}(),[]);return Object(y.d)(O.a,{isOpen:r,onClose:t},Object(y.d)(O.g,null),Object(y.d)(O.d,{maxWidth:900,borderRadius:"md"},Object(y.d)(O.f,null,"Registrar vel\xf3rio"),Object(y.d)(O.c,null),Object(y.d)(p.a,{ref:l,onSubmit:b},Object(y.d)(O.b,{paddingBottom:4},Object(y.d)(u.a,null,Object(y.d)(g.a,{name:"name",placeholder:"Nome",containerProps:{border:"1px solid",borderColor:"gray.400",bg:"white"}}),Object(y.d)(g.a,{name:"url_cam",placeholder:"Link da cam\xeara do vel\xf3rio",containerProps:{marginLeft:"16px",border:"1px solid",borderColor:"gray.400",bg:"white"}}),Object(y.d)(h.a,{backgroundColor:"White",name:"cemetery_id",placeholder:"Selecione o cemit\xe9rio",containerProps:{marginLeft:"16px",border:"1px solid",borderColor:"gray.400",bg:"white"}},i.map((function(e){return Object(y.d)("option",{value:e.id},e.name)}))))),Object(y.d)(O.e,null,Object(y.d)(s.a,{variant:"ghost",onClick:t,marginRight:4},"Cancelar"),Object(y.d)(s.a,{type:"submit",variantColor:"green"},"Salvar")))))}),C=(i.a.createElement,function(e){var r=e.isOpen,t=e.onClose,a=e.onSave,i=e.updatedFuneralId,l=Object(c.useRef)(null),d=Object(f.a)(),b=Object(c.useCallback)(function(){var e=Object(n.a)(o.a.mark((function e(r,n){var c,s,u,b,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null===(c=l.current)||void 0===c||c.setErrors({}),s=j.d().shape({name:j.f().required("Nome obrigat\xf3rio"),url_cam:j.f().required("Link da cam\xeara obrigat\xf3rio")}),e.next=5,s.validate(r,{abortEarly:!1});case 5:return u={id:i,name:r.name,url_cam:r.url_cam},e.next=8,x.a.put("funerals",u);case 8:d({status:"success",title:"dados do vel\xf3rio alterado com sucesso",position:"top",duration:3e3}),t(n),a(),e.next=20;break;case 13:if(e.prev=13,e.t0=e.catch(0),!(e.t0 instanceof j.a)){e.next=19;break}return m=Object(v.a)(e.t0),null===(b=l.current)||void 0===b||b.setErrors(m),e.abrupt("return");case 19:d({status:"error",title:"Erro ao atualizar os dados do vel\xf3rio",description:"Ocorreu um erro ao atualizar os dados do vel\xf3rio, tente novamente.",position:"top",duration:5e3});case 20:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r,t){return e.apply(this,arguments)}}(),[i]);return Object(y.d)(O.a,{isOpen:r,onClose:t},Object(y.d)(O.g,null),Object(y.d)(O.d,{maxWidth:900,borderRadius:"md"},Object(y.d)(O.f,null,"Alteras dados de vel\xf3rio"),Object(y.d)(O.c,null),Object(y.d)(p.a,{ref:l,onSubmit:b},Object(y.d)(O.b,{paddingBottom:4},Object(y.d)(u.a,null,Object(y.d)(g.a,{name:"name",placeholder:"Nome",containerProps:{border:"1px solid",borderColor:"gray.400",bg:"white"}}),Object(y.d)(g.a,{name:"url_cam",placeholder:"Link da cam\xeara do vel\xf3rio",containerProps:{marginLeft:"16px",border:"1px solid",borderColor:"gray.400",bg:"white"}}))),Object(y.d)(O.e,null,Object(y.d)(s.a,{variant:"ghost",onClick:t,marginRight:4},"Cancelar"),Object(y.d)(s.a,{type:"submit",variantColor:"green"},"Salvar")))))}),k=t("6o60"),_=t("BN90"),E=t("JAlk"),R=t("Nn3z"),S=t("kpsp");i.a.createElement;var L=[{Header:"Nome",accessor:"name"},{Header:"Link da c\xe2mera",accessor:"url_cam"},{Header:"Cemit\xe9rio",accessor:"cemetery"},{Header:"",accessor:"edit_button"}],N={name:"gnzpcw",styles:"color:gray.200;"};r.default=function(){var e=Object(c.useRef)(null),r=Object(S.b)().user,t=Object(c.useState)([]),a=t[0],f=t[1],O=Object(c.useState)(""),j=O[0],g=O[1],v=Object(c.useState)([]),P=v[0],z=v[1],B=Object(c.useState)(null),H=B[0],F=B[1],q=Object(d.a)(),W=q.isOpen,A=q.onOpen,I=q.onClose,T=Object(d.a)(),J=T.isOpen,V=T.onOpen,Z=T.onClose,X=Object(c.useCallback)((function(e){g(e),V()}),[]),D=Object(c.useCallback)((function(){x.a.get("funerals").then((function(e){var t=e.data,a=[];t.forEach((function(e){"administrador"===r.role?a.push({id:e.id,name:e.name,url_cam:e.url_cam,cemetery:e.cemetery.name,edit_button:Object(y.d)(s.a,{onClick:function(){X(e.id)}},Object(y.d)(l.i,null))}):a.push({id:e.id,name:e.name,url_cam:e.url_cam,cemetery:e.cemetery.name})})),z(a)}))}),[z]);Object(c.useEffect)((function(){D(),x.a.get("cemeteries").then((function(e){var t=e.data;F(r.role),f(t)}))}),[f]);var Y=Object(c.useCallback)(function(){var e=Object(n.a)(o.a.mark((function e(t,a){var n,c,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.reset,t.cemetery_id_for_search){e.next=4;break}return D(),e.abrupt("return");case 4:return e.next=6,x.a.get("funerals/cemetery/".concat(t.cemetery_id_for_search));case 6:c=e.sent,i=c.data,d=[],i.forEach((function(e){"administrador"===r.role?d.push({id:e.id,name:e.name,url_cam:e.url_cam,cemetery:e.cemetery.name,edit_button:Object(y.d)(s.a,{onClick:function(){X(e.id)}},Object(y.d)(l.i,null))}):d.push({id:e.id,name:e.name,url_cam:e.url_cam,cemetery:e.cemetery.name})})),z(d),n();case 12:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),[]);return Object(y.d)(i.a.Fragment,null,Object(y.d)(k.a,{title:"Endor",image:"og/boost.png",shouldExcludeTitleSuffix:!0,description:"Fazer o registro de vel\xf3rios na plataforma"}),Object(y.d)(u.a,{as:"main",height:"100vh",position:"relative",backgroundColor:"gray.800",width:"100vw"},Object(y.d)(_.a,null),Object(y.d)(u.a,{paddingLeft:2,paddingTop:15,paddingRight:65,width:"calc(100vw - 310px)",height:"100%",bg:"gray.800",direction:"column"},Object(y.d)(b.a,{width:"100%",color:"gray.200"},Object(y.d)(R.a,{css:N},"Vel\xf3rios")),Object(y.d)(p.a,{onSubmit:Y,ref:e},Object(y.d)(u.a,null,Object(y.d)(h.a,{height:8,backgroundColor:"White",name:"cemetery_id_for_search",placeholder:"Selecione o cemit\xe9rio",containerProps:{width:300,height:10,border:"1px solid",borderColor:"gray.400",bg:"white"}},a.map((function(e){return Object(y.d)("option",{key:e.id,value:e.id},e.name)}))),Object(y.d)(m.a,{label:"Pesquisar vel\xf3rios por cemit\xe9rio","aria-label":"Pesquisar vel\xf3rios por cemit\xe9rio"},Object(y.d)(s.a,{marginLeft:4,type:"submit"},Object(y.d)(l.o,null))),Object(y.d)(m.a,{label:"Adicionar novo vel\xf3rio.","aria-label":"Adicionar novo vel\xf3rio."},Object(y.d)(s.a,{hidden:"administrador"!==H,onClick:A,marginLeft:4},Object(y.d)(l.m,null))),Object(y.d)(w,{onSave:D,isOpen:W,onClose:I,cemeteries:a}),Object(y.d)(C,{updatedFuneralId:j,onSave:D,isOpen:J,onClose:Z})),Object(y.d)(u.a,{marginTop:6,height:"100%",maxHeight:{sm:300,md:400,lg:500,xl:600}},Object(y.d)(E.a,{columns:L,data:P}))))))}},L9Pj:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register/funerals",function(){return t("7bmZ")}])},Nn3z:function(e,r,t){"use strict";var a=t("ERkP"),o=t.n(a),n=t("xLrN"),c=t("l1C2");o.a.createElement;r.a=function(e){var r=e.children;return Object(c.d)(n.a,{size:"lg",borderBottom:"1px solid",borderBottomColor:"gray.300",color:"gray.300",paddingBottom:2,marginBottom:4},r)}},ucHa:function(e,r,t){"use strict";var a=t("cxan"),o=t("HbGN"),n=t("ERkP"),c=t.n(n),i=t("LdEA"),l=t.n(i),d=t("97Jx"),s=t.n(d),u=t("l1C2"),b=t("PbkR"),m=t("KE60"),p=t("EO+0"),f=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginBottom","marginLeft","marginRight","marginY","marginX","flex","flexBasis","width","minWidth","maxWidth","maxW","minW","w","zIndex","top","right","bottom","left","position","pos"],O=function(e){var r={},t={};for(var a in e)f.includes(a)?r[a]=e[a]:t[a]=e[a];return[r,t]},j=t("AL62"),g=function(e){var r=e.icon,t=l()(e,["icon"]);return"string"===typeof r?Object(u.d)(j.a,s()({focusable:"false",name:r,color:"currentColor"},t)):Object(u.d)(p.a,s()({as:r,"data-custom-icon":!0,focusable:"false",color:"currentColor"},t))},h=Object(n.forwardRef)((function(e,r){return Object(u.d)(p.a,s()({ref:r,position:"absolute",display:"inline-flex",width:"1.5rem",height:"100%",alignItems:"center",justifyContent:"center",right:"0.5rem",top:"50%",pointerEvents:"none",zIndex:2,transform:"translateY(-50%)"},e))})),v=Object(n.forwardRef)((function(e,r){var t=e.placeholder,a=e.children,o=l()(e,["placeholder","children"]);return Object(u.d)(b.a,s()({as:"select",appearance:"none",ref:r,pr:"2rem",pb:"px",lineHeight:"normal"},o),t&&Object(u.d)("option",{value:""},t),a)})),x=Object(n.forwardRef)((function(e,r){var t=e.rootProps,a=e.icon,o=e.iconSize,n=void 0===o?5:o,c=e.iconColor,i=l()(e,["rootProps","icon","iconSize","iconColor"]),d="dark"===Object(m.b)().colorMode?"whiteAlpha.800":"inherit",b=i.isReadOnly||i.isDisabled?.5:null,f=O(i),j=f[0],x=f[1];return Object(u.d)(p.a,s()({position:"relative",width:"100%"},j,t),Object(u.d)(v,s()({ref:r,color:d},x)),Object(u.d)(h,{opacity:b,color:c||x.color||d},Object(u.d)(g,{focusable:"false","aria-hidden":"true",icon:a||"chevron-down",size:n})))}));x.displayName="Select";var y=x,w=t("tORT"),C=t("Iy7w"),k=t("lN5B");var _={name:"qtmj6o",styles:"box-shadow:var(--errored-box-shadow);"},E={name:"iq98j",styles:"box-shadow:var(--focused-box-shadow);color:var(--text-color-focused) !important;"},R={name:"gptyu3",styles:"color:var(--text-color-focused) !important;"},S=Object(C.a)(p.a,{target:"edy7yzp0"})("--base-color:",(function(e){return e.theme.colors.gray[500]}),";--text-color-focused:",(function(e){return e.theme.colors.gray[600]}),";--focused-box-shadow:0 0 0 3px ",(function(e){return Object(k.a)(.4,e.theme.colors.gray[600])}),";--errored-box-shadow:0 0 0 3px ",(function(e){return Object(k.a)(.4,e.theme.colors.red[500])}),";color:var(--base-color);cursor:text;display:flex;align-items:center;transition:box-shadow 0.2s;",(function(e){return e.isErrored&&_})," ",(function(e){return e.isFocused&&E})," ",(function(e){return e.isFilled&&R})," svg{margin-right:16px;}input{flex:1;height:100%;background:transparent;border:0;color:var(--text-color-focused);&::placeholder{color:var(--base-color);}}");c.a.createElement,r.a=function(e){var r=e.name,t=e.children,c=e.containerProps,i=Object(o.a)(e,["name","children","containerProps"]),l=Object(n.useRef)(null),d=Object(n.useState)(!1),s=d[0],b=d[1],m=Object(n.useState)(!1),p=m[0],f=m[1],O=Object(w.c)(r),j=O.fieldName,g=O.defaultValue,h=O.error,v=O.registerField,x=Object(n.useCallback)((function(){b(!0)}),[]),C=Object(n.useCallback)((function(){var e;b(!1),f(!!(null===(e=l.current)||void 0===e?void 0:e.value))}),[]);return Object(n.useEffect)((function(){v({name:j,ref:l.current,path:"value"})}),[j,v]),Object(u.d)(S,Object(a.a)({isFocused:s,isFilled:p,isErrored:!!h,bg:"green.50",width:"100%",height:12,borderRadius:"md",paddingLeft:4},c,{onClick:function(){l.current.focus()}}),Object(u.d)(y,Object(a.a)({defaultValue:g,bg:"green.50",border:0,focusBorderColor:null,paddingLeft:0,onFocus:x,onBlur:C,ref:l},i),t))}},xLrN:function(e,r,t){"use strict";var a=t("97Jx"),o=t.n(a),n=t("LdEA"),c=t.n(n),i=t("l1C2"),l=t("EO+0"),d=t("ERkP"),s={"2xl":["4xl",null,"5xl"],xl:["3xl",null,"4xl"],lg:["xl",null,"2xl"],md:"xl",sm:"md",xs:"sm"},u=Object(d.forwardRef)((function(e,r){var t=e.size,a=void 0===t?"xl":t,n=c()(e,["size"]);return Object(i.d)(l.a,o()({ref:r,as:"h2",fontSize:s[a],lineHeight:"shorter",fontWeight:"bold",fontFamily:"heading"},n))}));u.displayName="Heading",r.a=u}},[["L9Pj",0,1,2,3,4,5,6,7,8,9]]]);